<form name="profileForm" class="profile-form" novalidate>
  <ion-view title="Profile">
    <ion-nav-buttons side="left">
      <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
    </ion-nav-buttons>
    <ion-nav-buttons side="right">
      <button ng-disabled="! profileForm.$dirty || (profileForm.$submitted && profileForm.$valid)" type="button" class="right button button-icon icon ion-ios-checkmark-empty sw-profile-save" ng-click="save(profileForm)"></button>
    </ion-nav-buttons>
    <ion-content class="has-header profile-page">
      <div class="profile-img-wrapper edit-profile" style="background-image: url('images/bg_new2.jpg');">
        <div class="avatar-section">
          <div class="content">
              <div class="avatar-icon">
                <div class="avatar-img" style="background-image: url('{{currentUser.config.avatar}}');">
                </div>
              </div>
          </div>
        </div>
      </div>
      <div class="list">
        <label ng-class="{'has-error': (profileForm.$submitted || profileForm.username.$dirty) && profileForm.username.$invalid}" class="item item-input item-stacked-label">
          <span class="input-label">Username </span>
          <span ng-if="(profileForm.$submitted || profileForm.username.$dirty) && profileForm.username.$invalid" class="input-label">{{errorMessages.username}}</span>
          <input type="text" placeholder="John Doe" ng-model="profile.username" name="username" required>
        </label>
        <label ng-class="{'has-error': (profileForm.$submitted || profileForm.email.$dirty) && profileForm.email.$invalid}" class="item item-input item-stacked-label">
          <span class="input-label">Email </span>
          <span ng-if="(profileForm.$submitted || profileForm.email.$dirty) && profileForm.email.$invalid" class="input-label">{{errorMessages.email}}</span>
          <input type="text" placeholder="test@example.com" ng-model="profile.email" name="email" required>
        </label>
        <label class="item item-input item-select">
          <div class="input-label">
            Timezone
          </div>
          <select class="timezone-dropdown"
            name="timezone"
            ng-model="profile.timezoneId"
            ng-options="tz.id as tz.timezone_user_string for tz in timezones"
            >
          </select>
        </label>
          <!-- <pre>
            submitted: {{profileForm.$submitted}}
            form valid: {{profileForm.$valid}}
            form dirty: {{profileForm.$dirty}}
            form pristine: {{profileForm.$pristine}}
            username.$invalid: {{profileForm.username.$invalid}}
            email.$invalid: {{profileForm.email.$invalid}}
          </pre> -->
      </div>
    </ion-content>
  </ion-view>
</form>
